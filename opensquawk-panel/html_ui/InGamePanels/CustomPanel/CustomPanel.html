<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="/SCSS/common.css" />
    <link rel="stylesheet" href="CustomPanel.css" />

    <script type="text/javascript" src="/JS/coherent.js"></script>
    <script type="text/javascript" src="/JS/common.js"></script>
    <script type="text/javascript" src="/JS/dataStorage.js"></script>
    <script type="text/javascript" src="/JS/buttons.js"></script>
    <script type="text/javascript" src="/JS/Services/ToolBarPanels.js"></script>
    <script type="text/javascript" src="/Pages/VCockpit/Instruments/Shared/BaseInstrument.js"></script>

    <link rel="import" href="/templates/ingameUi/ingameUi.html" />
    <link rel="import" href="/templates/ingameUiHeader/ingameUiHeader.html" />

    <script type="text/javascript" src="/JS/debug.js"></script>
    <script type="text/javascript" src="CustomPanel.js"></script>
</head>

<body class="border-box">
    <ingamepanel-opensquawk>
        <ingame-ui id="CustomPanel" panel-id="PANEL_CUSTOM_PANEL"
                   title="OpenSquawk Bridge" class="ingameUiFrame panelInvisible"
                   content-fit="true" min-width="340" min-height="220">

            <!-- Header bar -->
            <div id="osq-header">
                <div id="osq-title">
                    <span id="osq-logo">&#9992;</span>
                    OpenSquawk
                </div>
                <div id="osq-header-right">
                    <button id="osq-settings-toggle" title="Settings">&#9881;</button>
                    <button id="osq-debug-toggle" title="Toggle debug log">&#9998;</button>
                </div>
            </div>

            <!-- Status badges -->
            <div id="osq-status-bar">
                <span class="osq-badge" id="osq-badge-auth">&#9679; Not linked</span>
                <span class="osq-badge" id="osq-badge-sim">&#9679; Sim</span>
                <span class="osq-badge" id="osq-badge-flight">&#9679; Flight</span>
            </div>

            <!-- Settings panel (hidden by default) -->
            <div id="osq-settings-section" class="osq-hidden">
                <div class="osq-settings-row">
                    <label for="osq-set-url">Server URL</label>
                    <input id="osq-set-url" type="text" spellcheck="false" />
                </div>
                <div class="osq-settings-row">
                    <label for="osq-set-telem-interval">Telemetry interval (s)</label>
                    <input id="osq-set-telem-interval" type="number" min="5" max="300" step="1" />
                </div>
                <div class="osq-settings-row">
                    <label for="osq-set-heartbeat-interval">Heartbeat interval (s)</label>
                    <input id="osq-set-heartbeat-interval" type="number" min="10" max="600" step="1" />
                </div>
                <div class="osq-settings-row">
                    <label for="osq-set-auth-interval">Auth poll interval (s)</label>
                    <input id="osq-set-auth-interval" type="number" min="3" max="120" step="1" />
                </div>
                <div class="osq-settings-actions">
                    <button id="osq-settings-save">Save</button>
                    <button id="osq-settings-defaults">Defaults</button>
                </div>
            </div>

            <!-- Auth section -->
            <div id="osq-auth-section">
                <div id="osq-token-row">
                    <span id="osq-token-label">Token</span>
                    <span id="osq-token-value">------</span>
                    <button id="osq-token-copy" title="Copy token">&#128203;</button>
                    <button id="osq-token-reset" title="Generate new token">&#8635;</button>
                </div>
                <div id="osq-login-row">
                    <span id="osq-login-url"></span>
                </div>
                <div id="osq-user-row">
                    <span id="osq-user-name"></span>
                </div>
            </div>

            <!-- Telemetry display -->
            <div id="osq-telemetry-section">
                <div class="osq-telem-grid">
                    <div class="osq-telem-item">
                        <span class="osq-telem-label">IAS</span>
                        <span class="osq-telem-value" id="osq-t-ias">---</span>
                        <span class="osq-telem-unit">kt</span>
                    </div>
                    <div class="osq-telem-item">
                        <span class="osq-telem-label">ALT</span>
                        <span class="osq-telem-value" id="osq-t-alt">---</span>
                        <span class="osq-telem-unit">ft</span>
                    </div>
                    <div class="osq-telem-item">
                        <span class="osq-telem-label">VS</span>
                        <span class="osq-telem-value" id="osq-t-vs">---</span>
                        <span class="osq-telem-unit">fpm</span>
                    </div>
                    <div class="osq-telem-item">
                        <span class="osq-telem-label">GS</span>
                        <span class="osq-telem-value" id="osq-t-gs">---</span>
                        <span class="osq-telem-unit">kt</span>
                    </div>
                    <div class="osq-telem-item">
                        <span class="osq-telem-label">HDG</span>
                        <span class="osq-telem-value" id="osq-t-hdg">---</span>
                        <span class="osq-telem-unit">&deg;</span>
                    </div>
                    <div class="osq-telem-item">
                        <span class="osq-telem-label">XPDR</span>
                        <span class="osq-telem-value" id="osq-t-xpdr">----</span>
                        <span class="osq-telem-unit"></span>
                    </div>
                </div>
            </div>

            <!-- Debug log (hidden by default) -->
            <div id="osq-debug-section" class="osq-hidden">
                <div id="osq-debug-header">
                    <span>Debug Log</span>
                    <div id="osq-debug-actions">
                        <button id="osq-debug-copy-all" title="Copy all logs">&#128203;</button>
                        <button id="osq-debug-clear" title="Clear log">&#128465;</button>
                    </div>
                </div>
                <div id="osq-debug-log"></div>
                <div id="osq-debug-telemetry">
                    <span id="osq-debug-raw-label">Raw telemetry:</span>
                    <pre id="osq-debug-raw"></pre>
                </div>
            </div>

        </ingame-ui>
    </ingamepanel-opensquawk>
</body>
</html>
